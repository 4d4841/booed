<!DOCTYPE html>
<!--
 .................................................................................................
:::BSDB'::BSDB'::BSDB':::::BSDB':::BSDBS'::BSDBS'::BSDB'::::BSD'::BSDBS'::BSDBS'::BSDB'::::::BSD'::
::BSDBSD BSDBSD :.BSDBS':BSDBS .:BSD ..BSD  ...BSD 'BSDBS':BSD .BSD ..BSD  ...BSD :BSDBS'::BSDB .::
::COPYRIGHT2017 ::.BS BSDB .BS :BSD .::.BSD :::.BSD :BS .BSDB .BSD .:::BSD ::::BSD :BS BSDB BS .:::
:::BSDSTYLEBSD .:::BS  BS .:BS :BSD ::::BSD ::::BSD :BS ::BSD :BSD :::::...::::BSD :BS :BS  BS ::::
::::.LICENSE .::::BSD .:..::BS 'BSD ::::BSD ::::BSD :BS :::BS :BSD ::BSDBS'::::BSD :BS ::..:BS ':::
:::::::BSD .::::BSDB .::::::BSD 'BSD'::BSD .:::BSD .BSD :::BSD':BSD'::.BSD :::BSD .BSD :::::BSDB'::
::::::::B .::::::BS .:::::::.BSD ::BSDBS .:BSDBS  :BSD .::::BSD :.BSDBS BS BSDB .:BSD .:::::.BS .::
`::::::::.::::::::..::::::::::...:::.....:::.....:::...::::::...:::.............:::...::::::::..::'
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/iron-selector/iron-selector.html">
<link rel="import" href="../bower_components/paper-progress/paper-progress.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="mg-clipboard.html">
<link rel="import" href="mg-item-editor.html">
<link rel="import" href="mg-common-styles.html">
<link rel="import" href="mg-input.html">
<link rel="import" href="mg-item-image.html">
<link rel="import" href="mg-gallery-editor.html">


<dom-module id="mg-product-editor">
<template strip-whitespace>
    <custom-style>
  <style is="custom-style" include="mg-item-editor mg-common-styles iron-flex iron-flex-alignment">

    #product-editor {
    }

  </style>
    </custom-style>

  <mg-clipboard clipboard-list="{{clipboardList}}"></mg-clipboard>

  <div id="product-editor" class="vertical layout" hidden$="[[!itemKey]]">

    <div id="control-panel" class="horizontal layout wrap end" >

        <div style="display:inline-block">
      <paper-icon-button icon="add-gallery" on-tap="_onAddGalleryTap"></paper-icon-button>
      <paper-tooltip>เพิ่มแกลเลอรี่</paper-tooltip>
        </div>

        <div style="display:inline-block">
      <paper-icon-button disabled="[[!clipboardList.length]]" icon="content-paste" on-click="_onPasteButtonTap"></paper-icon-button>
      <paper-tooltip>แปะ</paper-tooltip>
        </div>

    </div>


  </div>
  [[galleryItemKey]]
  <mg-gallery-editor
    id="gallery-editor"
    class="flex"
    me="[[me]]"
    item-key="{{galleryItemKey}}"
    clipboard-list="{{clipboardList}}"
  ></mg-gallery-editor>

</template>
<script>
(function() {
  let memoizedTemplate;

  class MGProductEditor extends MGItemEditor {
    static get is() { return 'mg-product-editor'; }

    static get template() {
      if (!memoizedTemplate) {
        memoizedTemplate = Polymer.DomModule.import(this.is, 'template');
        let superTemplateContents = document.importNode(MGItemEditor.template.content, true);
        let editor = memoizedTemplate.content.querySelector('#product-editor');
        let firstChild = editor.firstChild;
        editor.insertBefore(superTemplateContents, firstChild);
      }
      return memoizedTemplate;
    }

    static get properties() { return {
      itemRole: {
        type: String,
        value: "product",
        readOnly: true,
      },

      defaultName: {
        type: String,
        value: 'สินค้าใหม่',
        readOnly: true,
      },
    }}

    static get observers() { return [
    ]}

    _onAddGalleryTap(e) {
      this.$['gallery-editor'].newItem('แกลเลอรี่ของ'+this.itemName);
    }

    _onPasteButtonTap(e) {

    }

  }

  customElements.define(MGProductEditor.is, MGProductEditor);
})();
</script>
</dom-module>
