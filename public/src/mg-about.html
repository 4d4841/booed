<!DOCTYPE html>
<!--
 .................................................................................................
:::BSDB'::BSDB'::BSDB':::::BSDB':::BSDBS'::BSDBS'::BSDB'::::BSD'::BSDBS'::BSDBS'::BSDB'::::::BSD'::
::BSDBSD BSDBSD :.BSDBS':BSDBS .:BSD ..BSD  ...BSD 'BSDBS':BSD .BSD ..BSD  ...BSD :BSDBS'::BSDB .::
::COPYRIGHT2017 ::.BS BSDB .BS :BSD .::.BSD :::.BSD :BS .BSDB .BSD .:::BSD ::::BSD :BS BSDB BS .:::
:::BSDSTYLEBSD .:::BS  BS .:BS :BSD ::::BSD ::::BSD :BS ::BSD :BSD :::::...::::BSD :BS :BS  BS ::::
::::.LICENSE .::::BSD .:..::BS 'BSD ::::BSD ::::BSD :BS :::BS :BSD ::BSDBS'::::BSD :BS ::..:BS ':::
:::::::BSD .::::BSDB .::::::BSD 'BSD'::BSD .:::BSD .BSD :::BSD':BSD'::.BSD :::BSD .BSD :::::BSDB'::
::::::::B .::::::BS .:::::::.BSD ::BSDBS .:BSDBS  :BSD .::::BSD :.BSDBS BS BSDB .:BSD .:::::.BS .::
`::::::::.::::::::..::::::::::...:::.....:::.....:::...::::::...:::.............:::...::::::::..::'
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/paper-card/paper-card.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/iron-iconset-svg/iron-iconset-svg.html">
<link rel="import" href="mg-button.html">
<link rel="import" href="mg-icons.html">

<dom-module id="mg-about">
  <template>
      <custom-style>
    <style include="mg-button iron-flex iron-flex-alignment">

      :host {
        color: var(--app-secondary-color);
        @apply --layout-vertical;
        @apply --layout-center;
        @apply --layout-center-justified;
      }

      h1 {
        font-weight: 300;
      }

      paper-card {
        margin-top: 50px;
        width: 240px;
        height: 240px;
        border-radius: 40px;
        padding: 10px;
        overflow: hidden;
        @apply --layout-vertical;
        @apply --layout-center;
        --paper-card-content: {
          box-shadow: inset 0px 5px 6px -3px rgba(255, 0, 0, 1.0);
        }
      }

      .button {
        width: 80px;
        height: 80px;
      }

      .logo-button {
        width: 400px;
        height: 100px;
        margin-left: 15px;
          border-radius: 0;
        --paper-button: {
          border-radius: 0;
        }
      }

      .display-icon {
        width: 100px;
        --iron-icon-width: 24px;
        --iron-icon-height: 24px;
        padding: 10px;
        @apply --layout-vertical;
        @apply --layout-center;
      }

      a:link {
            text-decoration: none;
      }

    </style>
      </custom-style>

    <iron-pages
      class="vertical layout center"
      selected="[[page]]"
      attr-for-selected="name"
      selected-attribute="visible"
      fallback-selection="card"
    > <paper-card class="layout self-center" name="card">
        <a href="/">
          <paper-icon-button src="/images/logo-bounce-in.svg" class="logo-button layout vertical center-justified" noink>
        </a>
        <a href="https://github.com/4d4841/booed">
          <paper-icon-button src="https://assets-cdn.github.com/images/modules/logos_page/Octocat.png" class="button layout vertical center-justified" noink>
          </paper-icon-button>
        </a>
      </paper-card>

      <div name="icons" style="width:100%" class="horizontal layout wrap">
        <template is="dom-repeat" items="[[iconNames]]">
          <div class="display-icon vertical layout center">
            <iron-icon icon="[[item]]"></iron-icon>
            [[_formatIconName(item)]]
          </div>
        </template>
      </div>

    </iron-pages>

  <app-route
      route="{{route}}"
      pattern="/:page"
      data="{{routeData}}"
      tail="{{subroute}}">
  </app-route>

  </template>
  <script>

    class MGAbout extends Polymer.Element {
      _formatIconName(name) {
        return name.split(':')[1];
      }
      static get is() { return 'mg-about'; }

      static get properties() { return {

        menu: {
          type: Object,
          value: { entries: [
            { name:"tos", path:"/about/tos", icon:"info", title:"เงื่อนไขการให้บริการ", },
            { name:"policy", path:"/about/privacy-policy", icon:"info", title:"นโยบายความเป็นส่วนตัว"},
          ]}
        },

        visible: {
          type: Boolean,
          observer: '_visibleChanged'
        },

        route: {
          type: Object,
          notify: true,
          observer: '_routeChanged'
        },

        _meta: {
          value: Polymer.Base.create('iron-meta', {type: 'iconset'})
        },

      }}

      connectedCallback() {
        super.connectedCallback();
        this.set('iconNames', this._meta.byKey('icons').getIconNames());
      }

      _routeChanged( route) {
        if (route.prefix == '/about') {
          this.set('page', this.routeData.page);
        }
      }


      _visibleChanged(visible) {
        if (visible) {
          this.dispatchEvent(new CustomEvent('change-section', {
            bubbles: true, composed: true, detail: {title: 'About', target:this}}));
        }
      }

    }

    customElements.define(MGAbout.is, MGAbout);

  </script>
</dom-module>
